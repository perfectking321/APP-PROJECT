# ====================================
# Server Configuration
# ====================================
server.port=8080
server.servlet.context-path=/
spring.mvc.throw-exception-if-no-handler-found=false
spring.web.resources.add-mappings=true

# ====================================
# Database Configuration (H2)
# ====================================
# File-based H2 database for persistent storage
spring.datasource.url=jdbc:h2:file:./data/interiordb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.platform=h2

# ====================================
# Database Initialization
# ====================================
spring.sql.init.mode=always
spring.sql.init.platform=h2
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.data-locations=classpath:data.sql

# ====================================
# H2 Console (for debugging)
# ====================================
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ====================================
# OpenRouter AI Configuration
# ====================================
openrouter.api.url=https://openrouter.ai/api/v1/chat/completions
openrouter.api.key=${OPENROUTER_API_KEY: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}
# DeepSeek model - try different format variations
openrouter.model=google/gemini-2.0-flash-exp:free
openrouter.app.name=Interior Design App
openrouter.site.url=http://localhost:3000

# ====================================
# AI Configuration
# ====================================
ai.timeout.seconds=30
ai.max-retries=3
ai.retry.delay.seconds=2

# ====================================
# CORS Configuration
# ====================================
cors.allowed.origins=http://localhost:3000

# ====================================
# File Upload Configuration
# ====================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
file.upload.dir=./uploads/floorplans

# ====================================
# Genetic Algorithm Configuration
# ====================================
ga.population.size=50
ga.max.generations=100
ga.mutation.rate=0.15
ga.cache.checkpoint.interval=10
ga.timeout.seconds=60

# ====================================
# Python Service Configuration
# ====================================
python.service.url=http://localhost:5000
python.service.timeout.seconds=30

# ====================================
# Logging Configuration
# ====================================
logging.level.root=INFO
logging.level.com.interiordesign=DEBUG
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ====================================
# Jackson Configuration
# ====================================
spring.jackson.serialization.indent-output=true
spring.jackson.serialization.fail-on-empty-beans=false
